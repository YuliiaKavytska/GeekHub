(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var i=n(0),l=n.n(i),c=n(14),s=n.n(c),a=(n(27),n(28),n(29),n(13)),o=Object(a.b)({name:"list",initialState:{list:[],lastTask:localStorage.lastTodo?JSON.parse(localStorage.lastTodo):"",countOfActiveTasks:0,filter:"all",filterResult:[]},reducers:{setTodos:function(t,e){t.list=e.payload.list,t.filterResult=e.payload.list,t.countOfActiveTasks=e.payload.list.filter((function(t){return"active"===t.status})).length},changeItemStatus:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.payload.id}));"active"===t.list[n].status?t.list[n].status="completed":t.list[n].status="active",t.countOfActiveTasks=t.list.filter((function(t){return"active"===t.status})).length,t.filterResult=t.list,t.filter="all"},changeEditing:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.payload.id}));!1===e.payload.case?t.list[n].editing=!1:t.list[n].editing=!t.list[n].editing,t.filterResult=t.list},changeItemTask:function(t,e){var n=t.list.findIndex((function(t){return t.id===e.payload.id}));t.list[n].task=e.payload.task,t.filterResult=t.list},addItem:function(t){if(""!==t.lastTask){var e=t.list.length>0?t.list[t.list.length-1].id+1:1;t.list.push({id:e,task:t.lastTask,status:"active",editing:!1}),t.lastTask="",t.countOfActiveTasks+=1,t.filterResult=t.list,t.filter="all"}},deleteItem:function(t,e){t.list=t.list.filter((function(t){return t.id!==e.payload.id})),t.countOfActiveTasks=t.list.filter((function(t){return"active"===t.status})).length,t.filterResult=t.list,t.filter="all"},deleteCompleted:function(t){t.list=t.list.filter((function(t){return"completed"!==t.status})),t.filterResult=t.list},changeLastTask:function(t,e){t.lastTask=e.payload.task},completedAll:function(t){t.list.every((function(t){return"active"===t.status}))||t.list.some((function(t){return"active"===t.status}))?(t.list.forEach((function(t){t.status="completed"})),t.countOfActiveTasks=0):(t.list.forEach((function(t){t.status="active"})),t.countOfActiveTasks=t.list.length),t.filterResult=t.list},changeFilter:function(t,e){switch(e.payload.filter){case"all":t.filterResult=t.list,t.filter="all",t.countOfActiveTasks=t.list.filter((function(t){return"active"===t.status})).length;break;case"active":t.filterResult=t.list.filter((function(t){return"completed"!==t.status})),t.filter="active",t.countOfActiveTasks=t.list.filter((function(t){return"active"===t.status})).length;break;case"completed":t.filterResult=t.list.filter((function(t){return"active"!==t.status})),t.filter="completed",t.countOfActiveTasks=t.list.filter((function(t){return"active"===t.status})).length;break;case"item":t.filterResult=t.list.filter((function(t){return t.id===e.payload.id})),t.filter="all",t.countOfActiveTasks=t.list.filter((function(t){return"active"===t.status})).length;break;default:return}}}}),u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(i){r("/api/all","GET").then((function(l){0===l.resultCode&&(i(f({list:l.list})),i(v({filter:t,id:e})),n&&i(h({id:e})))}))}},r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={method:e,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}};return 0!==Object.keys(n).length&&(i.body=JSON.stringify(n)),fetch(t,i).then((function(t){return t.json()}))},d=o.actions,f=d.setTodos,b=d.changeItemStatus,j=d.changeItemTask,h=d.changeEditing,O=d.addItem,g=d.deleteItem,m=d.deleteCompleted,k=d.changeLastTask,p=d.completedAll,v=d.changeFilter,T=n(9),C=n(3),x=n(1),y=function(t){var e=t.item,n=t.changeEditingCall,c=t.changeItemStatusCall,s=t.deleteItemCall,a=t.changeItemTaskCall,o=l.a.createRef(),u=Object(i.useCallback)((function(t){n(e.id,null,t.currentTarget.value,e.editing)}),[n,e]),r=Object(i.useCallback)((function(){c(e.id)}),[c,e]),d=Object(i.useCallback)((function(){s(e.id)}),[s,e]),f=Object(i.useCallback)((function(t){a(e.id,t.currentTarget.value)}),[a,e]),b=Object(i.useCallback)((function(t){n(e.id,!1,t.currentTarget.value,e.editing)}),[n,e]);return Object(i.useEffect)((function(){o.current&&o.current.focus()}),[o]),Object(x.jsxs)("li",{className:"completed"===e.status?e.editing?"completed editing":"completed":e.editing?"editing":void 0,onDoubleClick:u,children:[Object(x.jsxs)("div",{className:"view",children:[Object(x.jsx)("input",{className:"toggle",type:"checkbox",checked:"completed"===e.status,onChange:r}),Object(x.jsx)("label",{children:e.task}),Object(x.jsx)("button",{className:"destroy",onClick:d})]}),Object(x.jsx)("input",{className:"edit",value:e.task,onInput:f,onBlur:b,ref:o})]})},N=function(){var t=Object(T.c)((function(t){return t.toDo})).filterResult,e=Object(T.b)(),n=Object(C.e)(),l=n.filter,c=n.num,s=n.edit;Object(i.useEffect)((function(){switch(l){case"todo":e(c&&!s?u("item",Number(c)):c&&s?u("item",Number(c),!0):u("all"));break;case void 0:e(u("all"));break;default:e(u(l))}}),[e,s,c,l]);var a=Object(i.useCallback)((function(){e((function(t){r("/api/completeAll","GET").then((function(e){0===e.resultCode&&t(p())}))}))}),[e]),o=Object(i.useCallback)((function(t,n,i,l){e(l?function(t,e,n){return function(i){r("/api/changeTodo","POST",{id:t,task:n}).then((function(n){0===n.resultCode&&i(h({id:t,case:e}))}))}}(t,n,i):h({id:t,case:n}))}),[e]),d=Object(i.useCallback)((function(t){e(function(t){return function(e){r("/api/changeTodo","PUT",{id:t}).then((function(n){0===n.resultCode&&e(b({id:t}))}))}}(t))}),[e]),f=Object(i.useCallback)((function(t){e(function(t){return function(e){r("/api/changeTodo","DELETE",{id:t}).then((function(n){0===n.resultCode&&e(g({id:t}))}))}}(t))}),[e]),O=Object(i.useCallback)((function(t,n){e(j({id:t,task:n}))}),[e]);return Object(x.jsxs)("section",{className:"main",children:[Object(x.jsx)("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",onClick:a}),Object(x.jsx)("label",{htmlFor:"toggle-all",children:" Mark all as complete"}),Object(x.jsx)("ul",{className:"todo-list",children:t.map((function(t){return Object(x.jsx)(y,{item:t,changeEditingCall:o,changeItemStatusCall:d,deleteItemCall:f,changeItemTaskCall:O},t.id)}))})]})},I=n(10),E=function(){var t=Object(T.c)((function(t){return t.toDo})).countOfActiveTasks,e=Object(T.b)(),n=Object(i.useCallback)((function(){e((function(t){r("/api/deleteCompleted","DELETE").then((function(e){0===e.resultCode&&t(m())}))}))}),[e]);return Object(x.jsxs)("footer",{className:"footer",children:[Object(x.jsxs)("span",{className:"todo-count",children:[Object(x.jsx)("strong",{children:t})," item left"]}),Object(x.jsxs)("ul",{className:"filters",children:[Object(x.jsx)("li",{children:Object(x.jsx)(I.b,{activeClassName:"selected",to:"/todo",children:"All"})}),Object(x.jsx)("li",{children:Object(x.jsx)(I.b,{activeClassName:"selected",to:"/active",children:"Active"})}),Object(x.jsx)("li",{children:Object(x.jsx)(I.b,{activeClassName:"selected",to:"/completed",children:"Completed"})})]}),Object(x.jsx)("button",{className:"clear-completed",onClick:n,children:"Clear completed"})]})},A=n(8),R=Object(A.c)({toDo:o.reducer}),S=Object(a.c)({thunk:!0}),w=Object(a.a)({reducer:R,middleware:S});w.subscribe((function(){localStorage.lastTodo=JSON.stringify(w.getState().toDo.lastTask)})),window.store=w;var D=function(){var t=Object(T.c)((function(t){return t.toDo})).lastTask,e=Object(T.b)(),n=Object(i.useCallback)((function(n){"Enter"===n.key&&e(function(t){return function(e){r("/api/newTodo","POST",{task:t}).then((function(t){0===t.resultCode&&e(O())}))}}(t))}),[e,t]),l=Object(i.useCallback)((function(t){e(k({task:t.target.value}))}),[e]);return Object(x.jsxs)("header",{className:"header",children:[Object(x.jsx)("h1",{children:"todos"}),Object(x.jsx)("input",{className:"new-todo",placeholder:"What needs to be done?",value:t,onInput:l,onKeyPress:n,autoFocus:!0})]})},F=function(){return Object(x.jsxs)("section",{className:"todoapp",children:[Object(x.jsx)(D,{}),Object(x.jsx)(C.a,{path:"/:filter(active|all|completed|todo)?/:num?/:edit?",render:function(){return Object(x.jsx)(N,{})}}),Object(x.jsx)(E,{})]})},L=function(){return Object(x.jsx)(I.a,{children:Object(x.jsx)(T.a,{store:w,children:Object(x.jsx)(F,{})})})},P=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(e){var n=e.getCLS,i=e.getFID,l=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),i(t),l(t),c(t),s(t)}))};s.a.render(Object(x.jsxs)(l.a.StrictMode,{children:[Object(x.jsx)(L,{}),","]}),document.getElementById("root")),P()}},[[40,1,2]]]);
//# sourceMappingURL=main.1c251570.chunk.js.map