(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,n){e.exports={error:"Header_error__17BVU",header:"Header_header__3mObx"}},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var l=n(0),i=n.n(l),c=n(14),s=n.n(c),a=(n(28),n(29),n(30),n(13)),r=Object(a.b)({name:"list",initialState:{list:[],lastTask:localStorage.lastTodo?JSON.parse(localStorage.lastTodo):"",countOfActiveTasks:0,filter:"all",filterResult:[],error:null},reducers:{setTodos:function(e,t){e.list=t.payload.list,e.filterResult=t.payload.list,e.countOfActiveTasks=t.payload.list.filter((function(e){return"active"===e.status})).length,e.error=null},changeItemStatus:function(e,t){var n=e.list.findIndex((function(e){return e.id===t.payload.id}));"active"===e.list[n].status?e.list[n].status="completed":e.list[n].status="active",e.countOfActiveTasks=e.list.filter((function(e){return"active"===e.status})).length,e.filterResult=e.list,e.filter="all",e.error=null},changeEditing:function(e,t){var n=e.list.findIndex((function(e){return e.id===t.payload.id}));!1===t.payload.case?e.list[n].editing=!1:e.list[n].editing=!e.list[n].editing,e.filterResult=e.list},changeItemTask:function(e,t){var n=e.list.findIndex((function(e){return e.id===t.payload.id}));e.list[n].task=t.payload.task,e.filterResult=e.list,e.error=null},addItem:function(e){if(""!==e.lastTask){var t=e.list.length>0?e.list[e.list.length-1].id+1:1;e.list.push({id:t,task:e.lastTask,status:"active",editing:!1}),e.lastTask="",e.countOfActiveTasks+=1,e.filterResult=e.list,e.filter="all"}e.error=null},deleteItem:function(e,t){e.list=e.list.filter((function(e){return e.id!==t.payload.id})),e.countOfActiveTasks=e.list.filter((function(e){return"active"===e.status})).length,e.filterResult=e.list,e.filter="all",e.error=null},deleteCompleted:function(e){e.list=e.list.filter((function(e){return"completed"!==e.status})),e.filterResult=e.list,e.error=null},changeLastTask:function(e,t){e.lastTask=t.payload.task},completedAll:function(e){e.list.every((function(e){return"active"===e.status}))||e.list.some((function(e){return"active"===e.status}))?(e.list.forEach((function(e){e.status="completed"})),e.countOfActiveTasks=0):(e.list.forEach((function(e){e.status="active"})),e.countOfActiveTasks=e.list.length),e.filterResult=e.list,e.error=null},changeFilter:function(e,t){switch(t.payload.filter){case"all":e.filterResult=e.list,e.filter="all";break;case"active":e.filterResult=e.list.filter((function(e){return"completed"!==e.status})),e.filter="active";break;case"completed":e.filterResult=e.list.filter((function(e){return"active"!==e.status})),e.filter="completed";break;case"item":e.filterResult=e.list.filter((function(e){return e.id===t.payload.id})),e.filter="all";break;default:return}e.countOfActiveTasks=e.list.filter((function(e){return"active"===e.status})).length,e.error=null},setErrorResponse:function(e,t){e.error=t.payload.error}}}),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(l){u("/api/all","GET").then((function(i){0===i.resultCode?(l(f({list:i.list})),l(v({filter:e,id:t})),n&&l(h({id:t}))):l(C({error:i.message}))}))}},u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={method:t,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}};return 0!==Object.keys(n).length&&(l.body=JSON.stringify(n)),fetch(e,l).then((function(e){return e.json()}))},d=r.actions,f=d.setTodos,b=d.changeItemStatus,j=d.changeItemTask,h=d.changeEditing,m=d.addItem,O=d.deleteItem,g=d.deleteCompleted,p=d.changeLastTask,k=d.completedAll,v=d.changeFilter,C=d.setErrorResponse,T=n(9),x=n(3),y=n(1),N=function(e){var t=e.item,n=e.changeEditingCall,c=e.changeItemStatusCall,s=e.deleteItemCall,a=e.changeItemTaskCall,r=i.a.createRef(),o=Object(l.useCallback)((function(e){n(t.id,null,e.currentTarget.value,t.editing)}),[n,t]),u=Object(l.useCallback)((function(){c(t.id)}),[c,t]),d=Object(l.useCallback)((function(){s(t.id)}),[s,t]),f=Object(l.useCallback)((function(e){a(t.id,e.currentTarget.value)}),[a,t]),b=Object(l.useCallback)((function(e){n(t.id,!1,e.currentTarget.value,t.editing)}),[n,t]);return Object(l.useEffect)((function(){r.current&&r.current.focus()}),[r]),Object(y.jsxs)("li",{className:"completed"===t.status?t.editing?"completed editing":"completed":t.editing?"editing":void 0,onDoubleClick:o,children:[Object(y.jsxs)("div",{className:"view",children:[Object(y.jsx)("input",{className:"toggle",type:"checkbox",checked:"completed"===t.status,onChange:u}),Object(y.jsx)("label",{children:t.task}),Object(y.jsx)("button",{className:"destroy",onClick:d})]}),Object(y.jsx)("input",{className:"edit",value:t.task,onInput:f,onBlur:b,ref:r})]})},I=function(){var e=Object(T.c)((function(e){return e.toDo})).filterResult,t=Object(T.b)(),n=Object(x.e)(),i=n.filter,c=n.num,s=n.edit;Object(l.useEffect)((function(){switch(i){case"todo":t(c&&!s?o("item",Number(c)):c&&s?o("item",Number(c),!0):o("all"));break;case void 0:t(o("all"));break;default:t(o(i))}}),[t,s,c,i]);var a=Object(l.useCallback)((function(){t((function(e){u("/api/completeAll","GET").then((function(t){0===t.resultCode?e(k()):e(C({error:t.message}))}))}))}),[t]),r=Object(l.useCallback)((function(e,n,l,i){t(i?function(e,t,n){return function(l){u("/api/changeTodo","POST",{id:e,task:n}).then((function(n){0===n.resultCode?l(h({id:e,case:t})):l(C({error:n.message}))}))}}(e,n,l):h({id:e,case:n}))}),[t]),d=Object(l.useCallback)((function(e){t(function(e){return function(t){u("/api/changeTodo","PUT",{id:e}).then((function(n){0===n.resultCode?t(b({id:e})):t(C({error:n.message}))}))}}(e))}),[t]),f=Object(l.useCallback)((function(e){t(function(e){return function(t){u("/api/changeTodo","DELETE",{id:e}).then((function(n){0===n.resultCode?t(O({id:e})):t(C({error:n.message}))}))}}(e))}),[t]),m=Object(l.useCallback)((function(e,n){t(j({id:e,task:n}))}),[t]);return Object(y.jsxs)("section",{className:"main",children:[Object(y.jsx)("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",onClick:a}),Object(y.jsx)("label",{htmlFor:"toggle-all",children:" Mark all as complete"}),Object(y.jsx)("ul",{className:"todo-list",children:e.map((function(e){return Object(y.jsx)(N,{item:e,changeEditingCall:r,changeItemStatusCall:d,deleteItemCall:f,changeItemTaskCall:m},e.id)}))})]})},E=n(10),R=function(){var e=Object(T.c)((function(e){return e.toDo})).countOfActiveTasks,t=Object(T.b)(),n=Object(l.useCallback)((function(){t((function(e){u("/api/deleteCompleted","DELETE").then((function(t){0===t.resultCode?e(g()):e(C({error:t.message}))}))}))}),[t]);return Object(y.jsxs)("footer",{className:"footer",children:[Object(y.jsxs)("span",{className:"todo-count",children:[Object(y.jsx)("strong",{children:e})," item left"]}),Object(y.jsxs)("ul",{className:"filters",children:[Object(y.jsx)("li",{children:Object(y.jsx)(E.b,{activeClassName:"selected",to:"/todo",children:"All"})}),Object(y.jsx)("li",{children:Object(y.jsx)(E.b,{activeClassName:"selected",to:"/active",children:"Active"})}),Object(y.jsx)("li",{children:Object(y.jsx)(E.b,{activeClassName:"selected",to:"/completed",children:"Completed"})})]}),Object(y.jsx)("button",{className:"clear-completed",onClick:n,children:"Clear completed"})]})},S=n(8),A=Object(S.c)({toDo:r.reducer}),w=Object(a.c)({thunk:!0}),D=Object(a.a)({reducer:A,middleware:w});D.subscribe((function(){localStorage.lastTodo=JSON.stringify(D.getState().toDo.lastTask)})),window.store=D;var F=n(20),L=n.n(F),P=function(){var e=Object(T.c)((function(e){return e.toDo})),t=e.lastTask,n=e.error,i=Object(T.b)(),c=Object(l.useCallback)((function(e){"Enter"===e.key&&i(function(e){return function(t){u("/api/newTodo","POST",{task:e}).then((function(e){0===e.resultCode?t(m()):t(C({error:e.message}))}))}}(t))}),[i,t]),s=Object(l.useCallback)((function(e){i(p({task:e.target.value}))}),[i]);return Object(y.jsxs)("header",{className:"header ".concat(L.a.header),children:[Object(y.jsx)("h1",{children:"todos"}),n&&Object(y.jsxs)("p",{className:L.a.error,children:["Server error: ",n]}),Object(y.jsx)("input",{className:"new-todo",placeholder:"What needs to be done?",value:t,onInput:s,onKeyPress:c,autoFocus:!0})]})},_=function(){return Object(y.jsxs)("section",{className:"todoapp",children:[Object(y.jsx)(P,{}),Object(y.jsx)(x.a,{path:"/:filter(active|all|completed|todo)?/:num?/:edit?",render:function(){return Object(y.jsx)(I,{})}}),Object(y.jsx)(R,{})]})},J=function(){return Object(y.jsx)(E.a,{children:Object(y.jsx)(T.a,{store:D,children:Object(y.jsx)(_,{})})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,l=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),l(e),i(e),c(e),s(e)}))};s.a.render(Object(y.jsxs)(i.a.StrictMode,{children:[Object(y.jsx)(J,{}),","]}),document.getElementById("root")),B()}},[[41,1,2]]]);
//# sourceMappingURL=main.5350ce22.chunk.js.map