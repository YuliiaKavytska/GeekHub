(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,s){"use strict";s.r(t);var a=s(0),c=s.n(a),n=s(25),l=s.n(n),i=(s(58),s(59),s(60),s(10)),r=s(36),o=s(22),u=Object(o.b)({name:"list",initialState:{list:[],lastTask:"",countOfActiveTasks:0,filter:"all",filterResult:[],error:null},reducers:{setTodos:function(e,t){e.list=t.payload.list,e.lastTask=t.payload.lastTask,e.filterResult=t.payload.list,e.countOfActiveTasks=t.payload.list.filter((function(e){return"active"===e.status})).length,e.error=null},changeItemStatus:function(e,t){var s=e.list.findIndex((function(e){return e.id===t.payload.id}));"active"===e.list[s].status?e.list[s].status="completed":e.list[s].status="active",e.countOfActiveTasks=e.list.filter((function(e){return"active"===e.status})).length,e.filterResult=e.list,e.filter="all",e.error=null},changeEditing:function(e,t){var s=e.list.findIndex((function(e){return e.id===t.payload.id}));!1===t.payload.case?e.list[s].editing=!1:e.list[s].editing=!e.list[s].editing,e.filterResult=e.list},setChangedTask:function(e,t){e.list=e.list.map((function(e){return e.id===t.payload.id?Object(r.a)(Object(r.a)({},e),{},{task:t.payload.task}):e})),e.filterResult=e.list},changeItemTask:function(e,t){var s=e.list.findIndex((function(e){return e.id===t.payload.id}));e.list[s].task=t.payload.task,e.filterResult=e.list,e.error=null},addItem:function(e,t){if(""!==e.lastTask){var s=e.list.length>0?e.list[e.list.length-1].id+1:1;e.list.push({id:s,task:t.payload.task,status:"active",editing:!1}),e.lastTask="",e.countOfActiveTasks+=1,e.filterResult=e.list,e.filter="all"}e.error=null},deleteItem:function(e,t){e.list=e.list.filter((function(e){return e.id!==t.payload.id})),e.countOfActiveTasks=e.list.filter((function(e){return"active"===e.status})).length,e.filterResult=e.list,e.filter="all",e.error=null},deleteCompleted:function(e){e.list=e.list.filter((function(e){return"completed"!==e.status})),e.filterResult=e.list,e.error=null},changeLastTask:function(e,t){e.lastTask=t.payload.task,e.error=null},completedAll:function(e){e.list.every((function(e){return"active"===e.status}))||e.list.some((function(e){return"active"===e.status}))?(e.list.forEach((function(e){e.status="completed"})),e.countOfActiveTasks=0):(e.list.forEach((function(e){e.status="active"})),e.countOfActiveTasks=e.list.length),e.filterResult=e.list,e.error=null},changeFilter:function(e,t){switch(t.payload.filter){case"all":e.filterResult=e.list,e.filter="all";break;case"active":e.filterResult=e.list.filter((function(e){return"completed"!==e.status})),e.filter="active";break;case"completed":e.filterResult=e.list.filter((function(e){return"active"!==e.status})),e.filter="completed";break;case"item":e.filterResult=e.list.filter((function(e){return e.id===t.payload.id})),e.filter="all";break;default:return}e.countOfActiveTasks=e.list.filter((function(e){return"active"===e.status})).length,e.error=null},setErrorResponse:function(e,t){e.error=t.payload.error}}}),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(a){f("/api/all","GET").then((function(c){var n=c.json();200===c.status?n.then((function(c){a(j({list:c.list,lastTask:c.lastTask})),a(x({filter:e,id:t})),s&&a(m({id:t}))})):n.then((function(e){a(y({error:e.message}))}))}))}},f=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={method:t,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}};return 0!==Object.keys(s).length&&(a.body=JSON.stringify(s)),fetch(e,a)},b=u.actions,j=b.setTodos,h=b.changeItemStatus,O=b.changeItemTask,m=b.changeEditing,k=b.setChangedTask,p=b.addItem,g=b.deleteItem,v=b.deleteCompleted,T=b.changeLastTask,C=b.completedAll,x=b.changeFilter,y=b.setErrorResponse,E=s(9),N=s(3),I=s(1),R=function(e){var t=e.item,s=e.changeEditingCall,n=e.changeItemStatusCall,l=e.deleteItemCall,i=e.changeItemTaskCall,r=c.a.createRef(),o=Object(a.useCallback)((function(e){s(t.id,null,e.currentTarget.value,t.editing)}),[s,t]),u=Object(a.useCallback)((function(){n(t.id)}),[n,t]),d=Object(a.useCallback)((function(){l(t.id)}),[l,t]),f=Object(a.useCallback)((function(e){i(t.id,e.currentTarget.value)}),[i,t]),b=Object(a.useCallback)((function(e){s(t.id,!1,e.currentTarget.value,t.editing)}),[s,t]);return Object(a.useEffect)((function(){r.current&&r.current.focus()}),[r]),Object(I.jsxs)("li",{className:"completed"===t.status?t.editing?"completed editing":"completed":t.editing?"editing":void 0,onDoubleClick:o,children:[Object(I.jsxs)("div",{className:"view",children:[Object(I.jsx)("input",{className:"toggle",type:"checkbox",checked:"completed"===t.status,onChange:u}),Object(I.jsx)("label",{children:t.task}),Object(I.jsx)("button",{className:"destroy",onClick:d})]}),Object(I.jsx)("input",{className:"edit",value:t.task,onInput:f,onBlur:b,ref:r})]})},w=s(53),A=s.n(w)()("http://localhost:8000/"),S=function(){var e=Object(E.c)((function(e){return e.toDo})).filterResult,t=Object(E.b)(),s=Object(N.e)(),c=s.filter,n=s.num,l=s.edit;Object(a.useEffect)((function(){switch(c){case"todo":t(n&&!l?d("item",Number(n)):n&&l?d("item",Number(n),!0):d("all"));break;case void 0:t(d("all"));break;default:t(d(c))}}),[t,l,n,c]),Object(a.useEffect)((function(){A.on("all:wasCompleted",(function(e){var s=e.success,a=Object(i.a)(e,["success"]);t(s?C():y({error:a.message}))})),A.on("todo:wasDeleted",(function(e){var s=e.id,a=e.success,c=Object(i.a)(e,["id","success"]);t(a?g({id:s}):y({error:c.message}))})),A.on("todoStatus:wasChanged",(function(e){var s=e.id,a=e.success,c=Object(i.a)(e,["id","success"]);t(a?h({id:s}):y({error:c.message}))})),A.on("todo:wasChanged",(function(e){var s=e.success,a=e.id,c=e.task,n=Object(i.a)(e,["success","id","task"]);t(s?k({id:a,task:c}):y({error:n.message}))}))}),[t]);var r=Object(a.useCallback)((function(){f("/api/completeAll","GET")}),[]),o=Object(a.useCallback)((function(e){!function(e){f("/api/changeTodo","DELETE",{id:e})}(e)}),[]),u=Object(a.useCallback)((function(e){!function(e){f("/api/changeTodo","PUT",{id:e})}(e)}),[]),b=Object(a.useCallback)((function(e,s,a,c){c?(!function(e,t){f("/api/changeTodo","POST",{id:e,task:t})}(e,a),t(m({id:e,case:s}))):t(m({id:e,case:s}))}),[t]),j=Object(a.useCallback)((function(e,s){t(O({id:e,task:s}))}),[t]);return Object(I.jsxs)("section",{className:"main",children:[Object(I.jsx)("input",{id:"toggle-all",className:"toggle-all",type:"checkbox",onClick:r}),Object(I.jsx)("label",{htmlFor:"toggle-all",children:" Mark all as complete"}),Object(I.jsx)("ul",{className:"todo-list",children:e.map((function(e){return Object(I.jsx)(R,{item:e,changeEditingCall:b,changeItemStatusCall:u,deleteItemCall:o,changeItemTaskCall:j},e.id)}))})]})},D=s(16),F=function(){var e=Object(E.c)((function(e){return e.toDo})).countOfActiveTasks,t=Object(E.b)();Object(a.useEffect)((function(){A.on("completed:wasDeleted",(function(e){var s=e.success,a=Object(i.a)(e,["success"]);t(s?v():y({error:a.message}))}))}),[t]);var s=Object(a.useCallback)((function(){f("/api/deleteCompleted","DELETE")}),[t]);return Object(I.jsxs)("footer",{className:"footer",children:[Object(I.jsxs)("span",{className:"todo-count",children:[Object(I.jsx)("strong",{children:e})," item left"]}),Object(I.jsxs)("ul",{className:"filters",children:[Object(I.jsx)("li",{children:Object(I.jsx)(D.b,{activeClassName:"selected",to:"/todo",children:"All"})}),Object(I.jsx)("li",{children:Object(I.jsx)(D.b,{activeClassName:"selected",to:"/active",children:"Active"})}),Object(I.jsx)("li",{children:Object(I.jsx)(D.b,{activeClassName:"selected",to:"/completed",children:"Completed"})})]}),Object(I.jsx)("button",{className:"clear-completed",onClick:s,children:"Clear completed"})]})},L=s(8),P=Object(L.c)({toDo:u.reducer}),_=Object(o.c)({thunk:!0}),M=Object(o.a)({reducer:P,middleware:_});window.store=M;var B=s(35),H=s.n(B),J=function(){var e=Object(E.c)((function(e){return e.toDo})),t=e.lastTask,s=e.error,c=Object(E.b)();Object(a.useEffect)((function(){A.on("newTodo:wasChanged",(function(e){var t=e.task,s=e.success,a=Object(i.a)(e,["task","success"]);c(s?T({task:t}):y({error:a.message}))})),A.on("newTodo:wasAdded",(function(e){var t=e.success,s=e.task,a=Object(i.a)(e,["success","task"]);c(t?p({task:s}):y({error:a.message}))}))}),[c]);var n=Object(a.useCallback)((function(e){"Enter"===e.key&&function(e){f("/api/newTodo","POST",{task:e})}(t)}),[c,t]),l=Object(a.useCallback)((function(e){var t;t=e.target.value,f("/api/lastTask","PUT",{text:t})}),[c]);return Object(I.jsxs)("header",{className:"header ".concat(H.a.header),children:[Object(I.jsx)("h1",{children:"todos"}),s&&Object(I.jsxs)("p",{className:H.a.error,children:["Server error: ",s]}),Object(I.jsx)("input",{className:"new-todo",placeholder:"What needs to be done?",value:t,onInput:l,onKeyPress:n,autoFocus:!0})]})},U=function(){return Object(I.jsxs)("section",{className:"todoapp",children:[Object(I.jsx)(J,{}),Object(I.jsx)(N.a,{path:"/:filter(active|all|completed|todo)?/:num?/:edit?",render:function(){return Object(I.jsx)(S,{})}}),Object(I.jsx)(F,{})]})},q=function(){return Object(I.jsx)(D.a,{children:Object(I.jsx)(E.a,{store:M,children:Object(I.jsx)(U,{})})})},G=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,102)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,l=t.getTTFB;s(e),a(e),c(e),n(e),l(e)}))};l.a.render(Object(I.jsxs)(c.a.StrictMode,{children:[Object(I.jsx)(q,{}),","]}),document.getElementById("root")),G()},35:function(e,t,s){e.exports={error:"Header_error__3M402",header:"Header_header__38kUd"}},58:function(e,t,s){},59:function(e,t,s){},60:function(e,t,s){}},[[101,1,2]]]);
//# sourceMappingURL=main.e4aa3217.chunk.js.map